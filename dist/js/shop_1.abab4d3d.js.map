{"version":3,"file":"js/shop_1.abab4d3d.js","mappings":"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","sources":["webpack://barry/./src/effect/cartEffects.js","webpack://barry/./src/components/shopinfo.vue","webpack://barry/./src/components/shopinfo.vue?e2e9","webpack://barry/./src/views/shop/shop .vue","webpack://barry/./src/views/shop/content.vue","webpack://barry/./src/views/shop/content.vue?0aaf","webpack://barry/./src/views/shop/Cart.vue","webpack://barry/./src/views/shop/Cart.vue?ac4d","webpack://barry/./src/views/shop/shop .vue?e0e7"],"sourcesContent":["import { useStore } from 'vuex'\r\nimport { computed } from 'vue'\r\n// 列表商品點擊邏輯\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const cartList = store.state.cartList\r\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\r\n    store.commit('changeCartItemInfo', {\r\n      shopId, productId, productInfo, num\r\n    })\r\n  }\r\n  const productList = computed(() => {\r\n    const productList = cartList[shopId]?.productList || {}\r\n    const notEmptyProductList = {}\r\n    for (const i in productList) {\r\n      const product = productList[i]\r\n      if (product.count > 0) {\r\n        notEmptyProductList[i] = product\r\n      }\r\n    }\r\n    return notEmptyProductList\r\n  })\r\n\r\n  const shopName = computed(() => {\r\n    const shopName = cartList[shopId]?.shopName || ''\r\n    return shopName\r\n  })\r\n  const calculations = computed(() => {\r\n    const productList = cartList[shopId]?.productList\r\n    const result = { total: 0, price: 0, allChecked: true }\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        result.total += product.count\r\n        if (product.check) {\r\n          result.price += (product.count * product.price)\r\n        }\r\n        if (product.count > 0 && !product.check) {\r\n          result.allChecked = false\r\n        }\r\n      }\r\n    }\r\n    result.price = result.price.toFixed(2)\r\n    return result\r\n  })\r\n  return { shopName, cartList, changeCartItemInfo, productList, calculations }\r\n}\r\n","<template>\r\n  <div class=\"shop\">\r\n    <img class=\"shop__img\" :src=\"item.imgUrl\">\r\n    <div\r\n      :class=\"{'shop__content':true, 'shop__content--bordered': hideBorder ? false:true}\">\r\n        <div class=\"shop__content__title\">{{item.name}}</div>\r\n            <div class=\"shop__content__tags\">\r\n                <span class=\"shop__content__tag\">\r\n                  月售: {{item.sales}}\r\n                </span>\r\n                <span class=\"shop__content__tag\">\r\n                  起送: {{item.expressLimit}}\r\n                </span>\r\n                <span class=\"shop__content__tag\">\r\n                  基礎運費: {{item.expressPrice}}\r\n                </span>\r\n            </div>\r\n            <div class=\"shop__content__hightlight\">{{item.slogan}}</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style lang='scss' scoped>\r\n.shop{\r\n  display:flex;\r\n  padding-top:.12rem;\r\n  &__img{\r\n      width:.56rem;\r\n      height:.56rem;\r\n      margin-right:.16rem;\r\n    }\r\n  &__content{\r\n    flex:1;\r\n    padding-bottom:.12rem;\r\n    &--bordered{\r\n      border-bottom:.01rem solid #F1F1F1;\r\n    }\r\n    &__title{\r\n      line-height:.22rem;\r\n      font-size:.16rem;\r\n      color:#333;\r\n    }\r\n    &__tags{\r\n      line-height:.18rem;\r\n      font-size:.13rem;\r\n      color:#333;\r\n      margin-top:.08rem;\r\n    }\r\n    &__tag{\r\n      margin-right:.16rem;\r\n    }\r\n    &__hightlight{\r\n      color:#E93B3B;\r\n      margin:.08rem 0 0 0;\r\n      line-height:.18rem;\r\n      font-size:.13rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nexport default {\r\n  name: 'shopinfo',\r\n  props: ['item', 'hideBorder']\r\n}\r\n</script>\r\n","import { render } from \"./shopinfo.vue?vue&type=template&id=5c9b7876&scoped=true\"\nimport script from \"./shopinfo.vue?vue&type=script&lang=js\"\nexport * from \"./shopinfo.vue?vue&type=script&lang=js\"\n\nimport \"./shopinfo.vue?vue&type=style&index=0&id=5c9b7876&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\user0001\\\\Desktop\\\\barry\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5c9b7876\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"wrapper\">\r\n    <div class= 'search'>\r\n        <div\r\n          class=\"search__back icofont-rounded-left\"\r\n          @click=\"handleBackClick\"></div>\r\n        <div class=\"search__content\">\r\n          <span class=\"icofont-search\"></span>\r\n          <input class=\"search__content__input\" placeholder=\"請輸入商品名稱\">\r\n        </div>\r\n    </div>\r\n    <shopinfo :item=\"item\" :hideBorder= \"true\" v-show=\"item.imgUrl\"/>\r\n    <shopcontent :shopName=\"item.name\"/>\r\n    <cart />\r\n  </div>\r\n</template>\r\n<script>\r\nimport shopinfo from '../../components/shopinfo'\r\nimport shopcontent from './content'\r\nimport cart from './Cart'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { get } from '../../utils/request'\r\nimport { reactive, toRefs } from 'vue'\r\n\r\n// 當前商家頁面\r\nconst useShopInfoEffect = () => {\r\n  const route = useRoute()\r\n  const data = reactive({ item: {} })\r\n  const getItemData = async () => {\r\n    const result = await get(`/api/shop/${route.params.id}`)\r\n    if (result.errno === 0 && result.data) {\r\n      data.item = result.data\r\n    }\r\n  }\r\n  const { item } = toRefs(data)\r\n  return { item, getItemData }\r\n}\r\n\r\n// 回上一頁按鈕邏輯\r\nconst useBackRouterEffect = () => {\r\n  const router = useRouter()\r\n  const handleBackClick = () => {\r\n    router.back()\r\n  }\r\n  return handleBackClick\r\n}\r\n\r\nexport default {\r\n  name: 'shop',\r\n  components: { shopinfo, shopcontent, cart },\r\n  setup () {\r\n    const { item, getItemData } = useShopInfoEffect()\r\n    const handleBackClick = useBackRouterEffect()\r\n    getItemData()\r\n    return { item, handleBackClick }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.wrapper {\r\n    padding: 0 .18rem;\r\n}\r\n.search {\r\n    height: .32rem;\r\n    margin: .14rem 0 .04rem 0;\r\n    display: flex;\r\n    &__back {\r\n        width:.3rem;\r\n        font-size: .24rem;\r\n        color: #B6B6B6;\r\n    }\r\n    &__content{\r\n        display: flex;\r\n        flex:1;\r\n        background: #F5F5F5;\r\n        border-radius: .16rem;\r\n        &__input{\r\n          display:block;\r\n          width:100%;\r\n          position:relative;\r\n          top:.02rem;\r\n          left:.15rem;\r\n          border: none;\r\n          outline: none;\r\n          background: none;\r\n          height: .32rem;\r\n          color: #333;\r\n          font-size: .14rem;\r\n          &::placeholder{\r\n            color: #333;\r\n          }\r\n        }\r\n    }\r\n}\r\n.icofont-rounded-left{\r\n    font-size:.3rem;\r\n    color: #B6B6B6;\r\n}\r\n.icofont-search {\r\n    font-size:.2rem;\r\n    position: relative;\r\n    top:.08rem;\r\n    left:.1rem;\r\n    color: #B7B7B7;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"content\">\r\n    <div class=\"category\">\r\n      <div\r\n       :class=\"{'category__item': true, 'category__item--active': currentTab=== item.tab}\"\r\n       v-for=\"item in categories\"\r\n       :key=\"item.name\"\r\n       @click= \"() => handleTabClick(item.tab)\">\r\n       {{item.name}}\r\n       </div>\r\n    </div>\r\n    <div class=\"product\">\r\n      <div\r\n       class=\"product__item\"\r\n       v-for=\"item in list\"\r\n       :key=\"item._id\">\r\n        <img class=\"product__item__img\" :src=\"item.imgUrl\">\r\n        <div class=\"product__item__detail\">\r\n            <h4 class=\"product__item__title\">{{item.name}}</h4>\r\n            <p class=\"product__item__sales\">月售{{item.sales}}份</p>\r\n            <p class=\"product__item__price\">\r\n              <span class=\"product__item__yen\">&yen;</span>{{item.price}}\r\n              <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\r\n            </p>\r\n        </div>\r\n        <div class=\"product__number\">\r\n          <span\r\n           class=\"product__number__minus\"\r\n           @click=\"() => { changeCartItem(shopId, item._id, item, -1, shopName) }\">\r\n           -</span>\r\n          <span class=\"product__number__count\">{{getProductCartCount(shopId, item._id)}}</span>\r\n          <span\r\n           class=\"product__number__plus\"\r\n           @click=\"() => { changeCartItem(shopId, item._id, item, 1, shopName) }\">\r\n           +</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, toRefs, watchEffect } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { get } from '../../utils/request'\r\nimport { useStore } from 'vuex'\r\nimport { useCommonCartEffect } from '../../effect/cartEffects'\r\n\r\nconst categories = [\r\n  { name: '全部商品', tab: 'all' },\r\n  { name: '秒殺', tab: 'seckill' },\r\n  { name: '新鲜水果', tab: 'fruit' }\r\n]\r\n\r\n// Tab 切換項目\r\nconst useTabEffect = () => {\r\n  const currentTab = ref(categories[0].tab)\r\n  const handleTabClick = (tab) => {\r\n    currentTab.value = tab\r\n  }\r\n  return { currentTab, handleTabClick }\r\n}\r\n\r\n// 商品內容取得\r\nconst useCurrentListEffect = (currentTab, shopId) => {\r\n  const content = reactive({ list: [] })\r\n  const getContentData = async () => {\r\n    const result = await get(`/api/shop/${shopId}/products`, {\r\n      tab: currentTab.value\r\n    })\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      content.list = result.data\r\n    } // ?.當數據不存在會返回undefine而不報錯\r\n  }\r\n  // 監聽currentTab的變化，點擊時發生改變進而再次請求api\r\n  watchEffect(() => { getContentData() })\r\n  // 進行解構，使用toRefs使響應姓資料保有響應功能\r\n  const { list } = toRefs(content)\r\n  return { list }\r\n}\r\n\r\n// 購物車\r\nconst useCartEffect = () => {\r\n  const store = useStore()\r\n  const { cartList, changeCartItemInfo } = useCommonCartEffect()\r\n  const changeShopName = (shopId, shopName) => {\r\n    store.commit('changeShopName', { shopId, shopName })\r\n  }\r\n  const changeCartItem = (shopId, productId, item, num, shopName) => {\r\n    changeCartItemInfo(shopId, productId, item, num)\r\n    changeShopName(shopId, shopName)\r\n  }\r\n  const getProductCartCount = (shopId, productId) => {\r\n    return cartList[shopId]?.productList?.[productId]?.count || 0\r\n  }\r\n  return { cartList, changeCartItem, getProductCartCount }\r\n}\r\n\r\nexport default {\r\n  name: 'Content',\r\n  props: ['shopName'],\r\n  setup () {\r\n    const route = useRoute()\r\n    const shopId = route.params.id\r\n    const { currentTab, handleTabClick } = useTabEffect()\r\n    const { list } = useCurrentListEffect(currentTab, shopId)\r\n    const { changeCartItem, cartList, getProductCartCount } = useCartEffect()\r\n    return {\r\n      categories, currentTab, handleTabClick, list, shopId, changeCartItem, cartList, getProductCartCount\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.content{\r\n    display:flex;\r\n    position:absolute;\r\n    left:0;\r\n    right:0;\r\n    top:1.5rem;\r\n    bottom:.5rem;\r\n}\r\n.category{\r\n    width:.76rem;\r\n    height: 100%;\r\n    background: #F5F5F5;\r\n    overflow-y: scroll;\r\n    &__item{\r\n      line-height:.4rem;\r\n      text-align:center;\r\n      font-size:.14rem;\r\n      color:#333;\r\n      &--active{\r\n        background:#FFF;\r\n      }\r\n    }\r\n}\r\n.product{\r\n    flex:1;\r\n    overflow-y:scroll;\r\n    &__item{\r\n      position: relative;\r\n      display:flex;\r\n      padding: .12rem 0;\r\n      margin: 0 .16rem;\r\n      border-bottom: .01rem solid #F1F1F1;\r\n      overflow:hidden;\r\n      &__img{\r\n        width:.68rem;\r\n        height:.68rem;\r\n        margin-right:.16rem;\r\n      }\r\n      &__title{\r\n        line-height:.2rem;\r\n        font-size:.14rem;\r\n        color:#333;\r\n        margin: 0;\r\n        }\r\n      &__sales{\r\n        margin: .06rem 0;\r\n        font-size:.12rem;\r\n        color:#333;\r\n        line-height:.16rem;\r\n        }\r\n      &__price{\r\n        margin: 0;\r\n        font-size:.14rem;\r\n        color:#E93B3B;\r\n        line-height:.2rem;\r\n        }\r\n      &__yen{\r\n        font-size: .12rem;\r\n      }\r\n      &__origin{\r\n        margin-left: .06rem;\r\n        line-height: .2rem;\r\n        font-size: .12rem;\r\n        color: #999;\r\n        text-decoration: line-through;\r\n      }\r\n    }\r\n    &__number{\r\n        position:absolute;\r\n        right:0rem;\r\n        bottom:.12rem;\r\n        &__count{\r\n          font-size: .15rem;\r\n        }\r\n        &__minus,\r\n        &__plus{\r\n            width:.2rem;\r\n            height:.2rem;\r\n            display:inline-block;\r\n            border-radius: 50%;\r\n            border: .01rem solid #666;\r\n            font-size: .2rem;\r\n            text-align: center;\r\n            line-height:.16rem;\r\n        }\r\n        &__minus{\r\n            border: .01rem solid #666;\r\n            color: #666;\r\n            margin-right: .1rem;\r\n        }\r\n        &__plus{\r\n            background:#0091FF;\r\n            color:#FFF;\r\n            margin-left: .1rem;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./content.vue?vue&type=template&id=189e253e&scoped=true\"\nimport script from \"./content.vue?vue&type=script&lang=js\"\nexport * from \"./content.vue?vue&type=script&lang=js\"\n\nimport \"./content.vue?vue&type=style&index=0&id=189e253e&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\user0001\\\\Desktop\\\\barry\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-189e253e\"]])\n\nexport default __exports__","<template>\n  <div\n   class=\"mask\"\n   v-if=\"showCart && calculations.total > 0\"\n   @click=\"handleCartShowChange\"/>\n  <div class=\"cart\">\n    <div class=\"product\" v-if=\"showCart && calculations.total > 0\">\n      <div class=\"product__header\">\n        <div\n          class=\"product__header__all\"\n          @click=\"() => setCartItemsChecked(shopId)\">\n          <span\n            class=\"product__header__icon\"\n            :class=\"{'icofont-check-circled':calculations.allChecked, 'icofont-close-circled':!calculations.allChecked}\"\n          >\n          </span>\n          全選\n        </div>\n        <div class=\"product__header__clear\">\n          <span class=\"product__header__clear__btn\"\n          @click=\"() => cleanCartProducts(shopId)\">\n        清空購物車</span>\n        </div>\n      </div>\n      <template\n        v-for=\"item in productList\"\n        :key=\"item._id\"\n      > <!--當項目數量>0的時候才會顯示-->\n        <div class=\"product__item\" v-if=\"item.count > 0\">\n        <!--取消商品項目，點擊變換item.check=ture or false進行icofont變換-->\n          <div\n            class=\"product__item__checked\"\n            :class=\"{'icofont-check-circled':item.check, 'icofont-close-circled':!item.check}\"\n            @click=\"() => changeCartItemChecked(shopId, item._id)\"\n          ></div>\n          <img class=\"product__item__img\" :src=\"item.imgUrl\" />\n          <div class=\"product__item__detail\">\n            <h4 class=\"product__item__title\">{{item.name}}</h4>\n            <p class=\"product__item__price\">\n              <span class=\"product__item__yen\">&yen;</span>{{item.price}}\n              <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\n            </p>\n          </div>\n          <div class=\"product__number\">\n            <span\n              class=\"product__number__minus\"\n              @click=\"() => { changeCartItemInfo(shopId, item._id, item, -1) }\"\n            >-</span>\n              {{item.count || 0}}\n            <span\n              class=\"product__number__plus\"\n              @click=\"() => { changeCartItemInfo(shopId, item._id, item, 1) }\"\n            >+</span>\n          </div>\n        </div>\n      </template>\n    </div>\n    <div class=\"check\">\n      <div class=\"check__icon\">\n        <img\n          src=\"http://www.dell-lee.com/imgs/vue3/basket.png\"\n          class=\"check__icon__img\"\n          @click=\"handleCartShowChange\"\n        />\n        <div class=\"check__icon__tag\">{{calculations.total}}</div>\n      </div>\n      <div class=\"check__info\">\n        總計：<span class=\"check__info__price\">&yen; {{calculations.price}}</span>\n      </div>\n      <div class=\"check__btn\" v-show=\"calculations.total > 0\">\n        <!--path能設置帶有變量shopId進入路由-->\n        <router-link :to=\"{path: `/orderconfirmation/${shopId}`}\">\n          結算\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute } from 'vue-router'\nimport { useCommonCartEffect } from '../../effect/cartEffects'\n\n// 購物車訊息\nconst useCartEffect = (shopId) => {\n  const store = useStore()\n  const { productList, calculations, changeCartItemInfo } = useCommonCartEffect(shopId)\n\n  const changeCartItemChecked = (shopId, productId) => {\n    store.commit('changeCartItemChecked', { shopId, productId })\n  }\n\n  const cleanCartProducts = (shopId) => {\n    store.commit('cleanCartProducts', { shopId })\n  }\n\n  const setCartItemsChecked = (shopId) => {\n    store.commit('setCartItemsChecked', { shopId })\n  }\n\n  return { calculations, productList, cleanCartProducts, changeCartItemInfo, changeCartItemChecked, setCartItemsChecked }\n}\n// 隱藏購物車\nconst toggleCartEffect = () => {\n  const showCart = ref(false)\n  const handleCartShowChange = () => {\n    showCart.value = !showCart.value\n  }\n  return { showCart, handleCartShowChange }\n}\n\nexport default {\n  name: 'Cart',\n  setup () {\n    const route = useRoute()\n    const shopId = route.params.id\n    const { showCart, handleCartShowChange } = toggleCartEffect()\n    const { calculations, productList, cleanCartProducts, allChecked, changeCartItemInfo, changeCartItemChecked, setCartItemsChecked } = useCartEffect(shopId)\n    return { calculations, shopId, productList, cleanCartProducts, changeCartItemInfo, changeCartItemChecked, allChecked, setCartItemsChecked, showCart, handleCartShowChange }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\na{\n  text-decoration:none;\n  color: white\n}\n.mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  background: rgba(0, 0, 0, .5);\n  z-index: 1;\n}\n.cart {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n  background: #FFF;\n}\n.product {\n  overflow-y: scroll;\n  background: #FFF;\n  &__header {\n    display: flex;\n    line-height: .52rem;\n    border-bottom: .01rem solid #F5F5F5;\n    font-size: .14rem;\n    color: #333;\n    &__all {\n      width: .64rem;\n      margin-left: .18rem;\n    }\n    &__icon {\n      display: inline-block;\n      margin-right: .1rem;\n      margin-top: .15rem;\n      vertical-align: top;\n      color: #0091FF;\n      font-size: .2rem;\n    }\n    &__clear {\n      flex: 1;\n      margin-right: .16rem;\n      text-align: right;\n      &__btn {\n        display: inline-block;\n      }\n    }\n  }\n  &__item {\n    position: relative;\n    display: flex;\n    padding: .12rem 0;\n    margin: 0 .16rem;\n    border-bottom: .01rem solid #F5F5F5;\n    &__checked {\n      line-height: .5rem;\n      margin-right: .2rem;\n      color: #0091FF;\n      font-size: .2rem;\n    }\n    &__detail {\n      overflow: hidden;\n    }\n    &__img {\n      width: .46rem;\n      height: .46rem;\n      margin-right: .16rem;\n    }\n    &__title {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: #333;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n    &__price {\n      margin: .06rem 0 0 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: #999;\n    }\n    &__yen {\n      font-size: .12rem;\n    }\n    &__origin {\n      margin-left: .06rem;\n      line-height: .2rem;\n      font-size: .12rem;\n      color: #999;\n      text-decoration: line-through;\n    }\n    .product__number {\n      position: absolute;\n      right: 0;\n      bottom: .26rem;\n      &__minus, &__plus\n       {\n        display: inline-block;\n        width: .2rem;\n        height: .2rem;\n        line-height: .16rem;;\n        border-radius: 50%;\n        font-size: .2rem;\n        text-align: center;\n      }\n      &__minus {\n        border: .01rem solid #666;\n        color: #666;\n        margin-right: .05rem;\n      }\n      &__plus {\n        background: #0091FF;\n        color: #FFF;\n        margin-left: .05rem;\n      }\n    }\n  }\n}\n\n.check {\n  display: flex;\n  height: .49rem;\n  border-top: .01rem solid #4FB0F9;\n  line-height: .49rem;\n  &__icon {\n    position: relative;\n    width: .84rem;\n    &__img {\n      display: block;\n      margin: .12rem auto;\n      width: .28rem;\n      height: .26rem;\n    }\n    &__tag {\n      position: absolute;\n      right: .2rem;\n      top: .04rem;\n      width: .2rem;\n      height: .2rem;\n      line-height: .2rem;\n      background-color: #333;\n      border-radius: 50%;\n      font-size: .12rem;\n      text-align: center;\n      color: #fff;\n      transform: scale(.5);\n    }\n  }\n  &__info {\n    flex: 1;\n    color: #333;\n    font-size: .12rem;\n    &__price {\n      line-height: .49rem;\n      color: #E93B3B;\n      font-size: .18rem;\n    }\n  }\n  &__btn {\n    background-color: #4FB0F9;\n    width: .98rem;\n    text-align: center;\n    color: #FFF;\n    font-size: .14rem;\n  }\n}\n</style>\n","import { render } from \"./Cart.vue?vue&type=template&id=115b9848&scoped=true\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport \"./Cart.vue?vue&type=style&index=0&id=115b9848&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\user0001\\\\Desktop\\\\barry\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-115b9848\"]])\n\nexport default __exports__","import { render } from \"./shop .vue?vue&type=template&id=afe1b43c&scoped=true\"\nimport script from \"./shop .vue?vue&type=script&lang=js\"\nexport * from \"./shop .vue?vue&type=script&lang=js\"\n\nimport \"./shop .vue?vue&type=style&index=0&id=afe1b43c&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\user0001\\\\Desktop\\\\barry\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-afe1b43c\"]])\n\nexport default __exports__"],"names":["useCommonCartEffect","shopId","store","useStore","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","computed","notEmptyProductList","i","product","count","shopName","calculations","result","total","price","allChecked","check","toFixed","class","_createElementBlock","_createElementVNode","src","$props","imgUrl","_toDisplayString","name","sales","expressLimit","expressPrice","slogan","props","__exports__","render","placeholder","onClick","$setup","_hoisted_3","_createVNode","_component_shopinfo","item","hideBorder","_component_shopcontent","_component_cart","_Fragment","_renderList","tab","key","_id","_hoisted_10","oldPrice","_hoisted_13","_hoisted_15","categories","useTabEffect","currentTab","ref","handleTabClick","value","useCurrentListEffect","content","reactive","list","getContentData","async","get","errno","data","length","watchEffect","toRefs","useCartEffect","changeShopName","changeCartItem","getProductCartCount","setup","route","useRoute","params","id","_hoisted_12","_hoisted_16","_component_router_link","to","path","changeCartItemChecked","cleanCartProducts","setCartItemsChecked","toggleCartEffect","showCart","handleCartShowChange","useShopInfoEffect","getItemData","useBackRouterEffect","router","useRouter","handleBackClick","back","components","shopinfo","shopcontent","cart"],"sourceRoot":""}